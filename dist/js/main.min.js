"use strict";function _createForOfIteratorHelper(e,t){var n,r,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return r=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==i.return||i.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var navToggle=document.querySelector(".toggle-button"),primaryNav=document.querySelector("#primary-nav"),featuresControlBtns=document.querySelectorAll(".features-tabs__tab-button"),featureTabs=document.querySelectorAll(".features-tab"),accordion=document.querySelector(".accordion"),accordionBtns=accordion.querySelectorAll(".accordion__control"),optInForm=document.querySelector(".opt-in-form"),optInFormInputBox=optInForm.querySelector(".opt-in-form__input-box"),optInFormInput=optInForm.querySelector('.opt-in-form__input[type="email"]'),optInFormSubmitBtn=optInForm.querySelector('button[type="submit"]'),optInFormMessage=optInForm.querySelector(".opt-in-form__message"),EMAIL_REGEX=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,KEY_CODES={end:35,home:36,arrowUp:38,arrowDown:40},handleNavToggle=function(e){var t="true"===navToggle.getAttribute("aria-expanded");navToggle.setAttribute("aria-expanded",!t),navigationExpanding(!t)},navigationExpanding=function(e){e?(primaryNav.setAttribute("data-expanded",!0),primaryNav.classList.add("slide-in"),primaryNav.addEventListener("animationend",function(){return primaryNav.classList.remove("slide-in")},{once:!0})):(primaryNav.classList.add("slide-out"),primaryNav.addEventListener("animationend",function(){primaryNav.classList.remove("slide-out"),primaryNav.removeAttribute("data-expanded")},{once:!0}))},handleFeaturesControlButton=function(e){var t,e=e.target;"true"!==e.getAttribute("aria-expanded")&&(collapseAllFeaturesBtns(),hideAllFeaturesTabs(),updateUnderlineOrigin(parseInt(e.dataset.index)),e.setAttribute("aria-expanded",!0),e="#"+e.getAttribute("aria-controls"),(t=document.querySelector(e)).classList.add("active"),t.classList.add("showing"),t.addEventListener("animationend",function(){return t.classList.remove("showing")},{once:!0}))},collapseAllFeaturesBtns=function(){var e,t=_createForOfIteratorHelper(featuresControlBtns);try{for(t.s();!(e=t.n()).done;)e.value.setAttribute("aria-expanded",!1)}catch(e){t.e(e)}finally{t.f()}},updateUnderlineOrigin=function(n){featuresControlBtns.forEach(function(e,t){t===n&&("left"===e.dataset.undelineOrigin?e.dataset.undelineOrigin="right":e.dataset.undelineOrigin="left"),t<n&&e.setAttribute("data-underline-origin","right"),n<t&&e.setAttribute("data-underline-origin","left")})},hideAllFeaturesTabs=function(){featureTabs.forEach(function(e){return e.classList.remove("active")})},initFeaturesControlBtns=function(){featuresControlBtns.forEach(function(e,t){return e.setAttribute("data-index",t)})},handleKeyPress=function(t){var e=t.keyCode,n=Array.from(accordionBtns).findIndex(function(e){return e===t.target});switch(e){case KEY_CODES.arrowUp:t.preventDefault(),moveFocusUp(n);break;case KEY_CODES.arrowDown:t.preventDefault(),moveFocusDown(n);break;case KEY_CODES.home:t.preventDefault(),moveFocusToFirstElement();break;case KEY_CODES.end:t.preventDefault(),moveFocusToLastElement()}},moveFocusUp=function(e){e=(accordionBtns.length+e-1)%accordionBtns.length;return accordionBtns[e].focus(),e},moveFocusDown=function(e){e=(e+1)%accordionBtns.length;return accordionBtns[e].focus(),e},moveFocusToFirstElement=function(e){return accordionBtns[0].focus(),0},moveFocusToLastElement=function(e){return accordionBtns[accordionBtns.length-1].focus(),accordionBtns.length-1},handleOptInSubmit=function(e){e.preventDefault();e=optInFormInput.value;isBlank(e)?showMessage("error","This field cannot be empty"):isValidEmail(e)?showMessage("success","Successfully registered. Check your email box."):showMessage("error","Whoops, make sure it's an email")},showMessage=function(e,t){optInFormInputBox.setAttribute("data-status",e),optInFormMessage.innerText=t},isValidEmail=function(e){return EMAIL_REGEX.test(e)},isBlank=function(e){return""===e};navToggle.addEventListener("click",handleNavToggle),featuresControlBtns.forEach(function(e){return e.addEventListener("click",handleFeaturesControlButton)}),accordionBtns.forEach(function(e){return e.addEventListener("keydown",handleKeyPress)}),optInFormSubmitBtn.addEventListener("click",handleOptInSubmit),initFeaturesControlBtns();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibmF2VG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJpbWFyeU5hdiIsImZlYXR1cmVzQ29udHJvbEJ0bnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmVhdHVyZVRhYnMiLCJhY2NvcmRpb25CdG5zIiwiYWNjb3JkaW9uIiwib3B0SW5Gb3JtSW5wdXRCb3giLCJvcHRJbkZvcm0iLCJvcHRJbkZvcm1NZXNzYWdlIiwiZW5kIiwiRU1BSUxfUkVHRVgiLCJob21lIiwiYXJyb3dVcCIsIktFWV9DT0RFUyIsImFycm93RG93biIsImhhbmRsZU5hdlRvZ2dsZSIsImUiLCJpc0V4cGFuZGVkIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwibmF2aWdhdGlvbkV4cGFuZGluZyIsInNob3VsZEV4cGFuZCIsImFkZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm9uY2UiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlQXR0cmlidXRlIiwiaGFuZGxlRmVhdHVyZXNDb250cm9sQnV0dG9uIiwidXBkYXRlVW5kZXJsaW5lT3JpZ2luIiwiYnV0dG9uIiwidGFyZ2V0IiwiY29sbGFwc2VBbGxGZWF0dXJlc0J0bnMiLCJoaWRlQWxsRmVhdHVyZXNUYWJzIiwicGFyc2VJbnQiLCJkYXRhc2V0IiwiaW5kZXgiLCJ0YXJnZXRUYWJJZCIsInRhcmdldFRhYkVsZW1lbnQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwiZXJyIiwiZiIsInBpdm90SWR4IiwiY3RybEJ0biIsImlkeCIsInVuZGVsaW5lT3JpZ2luIiwiZm9yRWFjaCIsInRhYiIsImluaXRGZWF0dXJlc0NvbnRyb2xCdG5zIiwiaGFuZGxlS2V5UHJlc3MiLCJBcnJheSIsImZpbmRJbmRleCIsImJ0biIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsIm1vdmVGb2N1c1VwIiwibW92ZUZvY3VzRG93biIsIm1vdmVGb2N1c1RvRmlyc3RFbGVtZW50IiwiZnJvbSIsIm1vdmVGb2N1c1RvTGFzdEVsZW1lbnQiLCJwcmV2SWR4IiwibGVuZ3RoIiwibmV4dElkeCIsIl8iLCJmb2N1cyIsInZhbHVlIiwib3B0SW5Gb3JtSW5wdXQiLCJpc1ZhbGlkRW1haWwiLCJzaG93TWVzc2FnZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJpbm5lclRleHQiLCJlbWFpbCIsInRlc3QiLCJpc0JsYW5rIiwib3B0SW5Gb3JtU3VibWl0QnRuIl0sIm1hcHBpbmdzIjoib29DQUNBLElBQU1BLFVBQVlDLFNBQVNDLGNBQWMsZ0JBQWdCLEVBQ25EQyxXQUFhRixTQUFTQyxjQUFjLGNBQWMsRUFFbERFLG9CQUFzQkgsU0FBU0ksaUJBQWlCLDRCQUE0QixFQUpsRkMsWUFBQUwsU0FBQUksaUJBQUEsZUFBQSxFQUVNRixVQUFhRixTQUFTQyxjQUFjLFlBQUEsRUFDMUNLLGNBQUFDLFVBQUFILGlCQUFBLHFCQUFBLEVBRU1DLFVBQWNMLFNBQVNJLGNBQUFBLGNBQWlCLEVBQzlDSSxrQkFBQUMsVUFBQVIsY0FBQSx5QkFBQSxFQUNNTSxlQUFZUCxVQUFTQyxjQUFjLG1DQUFhLEVBQ2hESyxtQkFBZ0JDLFVBQVVILGNBQWlCLHVCQUFzQixFQUN2RU0saUJBQUFELFVBQUFSLGNBQUEsdUJBQUEsRUFFTU8sWUFDTix3SkFFTUUsVUFBQUEsQ0FFTkMsSUFBTUMsR0FFTkMsS0FBQSxHQUNBQyxRQUFNQyxHQUlMQyxVQUhPLEVBSVIsRUFBQ0MsZ0JBQUEsU0FBQUMsR0FJQSxJQUFNQyxFQUF5RCxTQUE1Q3BCLFVBQVVxQixhQUFhLGVBQWUsRUFGMURyQixVQUFBc0IsYUFBQSxnQkFBQSxDQUFBRixDQUFBLEVBQ0FHLG9CQUFxQixDQUFHSCxDQUFsQkYsQ0FJTixFQURDSyxvQkFBcUJILFNBQUFBLEdBQ3JCSSxHQUVEckIsV0FBTW9CLGFBQXNCLGdCQUF0QkEsQ0FBQUEsQ0FBQUEsRUFDTHBCLFdBQUlxQixVQUFjQyxJQUFBLFVBQUEsRUFHakJ0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biBlbGVtZW50cyAqL1xyXG5jb25zdCBuYXZUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlLWJ1dHRvbicpO1xyXG5jb25zdCBwcmltYXJ5TmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaW1hcnktbmF2Jyk7XHJcbi8qIGZlYXR1cmUgdGFicyBlbGVtZW50cyAqL1xyXG5jb25zdCBmZWF0dXJlc0NvbnRyb2xCdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmVzLXRhYnNfX3RhYi1idXR0b24nKTtcclxuY29uc3QgZmVhdHVyZVRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZXMtdGFiJyk7XHJcbi8qIGFjY29yZGlvbiBlbGVtZW50cyAqL1xyXG5jb25zdCBhY2NvcmRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJyk7XHJcbmNvbnN0IGFjY29yZGlvbkJ0bnMgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvckFsbCgnLmFjY29yZGlvbl9fY29udHJvbCcpO1xyXG4vKiBmb3JtIGVsZW1lbnRzICovXHJcbmNvbnN0IG9wdEluRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHQtaW4tZm9ybScpO1xyXG5jb25zdCBvcHRJbkZvcm1JbnB1dEJveCA9IG9wdEluRm9ybS5xdWVyeVNlbGVjdG9yKCcub3B0LWluLWZvcm1fX2lucHV0LWJveCcpO1xyXG5jb25zdCBvcHRJbkZvcm1JbnB1dCA9IG9wdEluRm9ybS5xdWVyeVNlbGVjdG9yKCcub3B0LWluLWZvcm1fX2lucHV0W3R5cGU9XCJlbWFpbFwiXScpO1xyXG5jb25zdCBvcHRJbkZvcm1TdWJtaXRCdG4gPSBvcHRJbkZvcm0ucXVlcnlTZWxlY3RvcignYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuY29uc3Qgb3B0SW5Gb3JtTWVzc2FnZSA9IG9wdEluRm9ybS5xdWVyeVNlbGVjdG9yKCcub3B0LWluLWZvcm1fX21lc3NhZ2UnKTtcclxuXHJcbmNvbnN0IEVNQUlMX1JFR0VYID1cclxuXHQvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcXSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XHJcbi8qIGtheSBtYXBwaW5nICovXHJcbmNvbnN0IEtFWV9DT0RFUyA9IHtcclxuXHRlbmQ6IDM1LFxyXG5cdGhvbWU6IDM2LFxyXG5cdGFycm93VXA6IDM4LFxyXG5cdGFycm93RG93bjogNDAsXHJcbn07XHJcblxyXG4vKiBuYXZpZ2F0aW9uIGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZU5hdlRvZ2dsZSA9IGUgPT4ge1xyXG5cdGNvbnN0IGlzRXhwYW5kZWQgPSBuYXZUb2dnbGUuZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJztcclxuXHRuYXZUb2dnbGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgIWlzRXhwYW5kZWQpO1xyXG5cdG5hdmlnYXRpb25FeHBhbmRpbmcoIWlzRXhwYW5kZWQpO1xyXG59O1xyXG5cclxuY29uc3QgbmF2aWdhdGlvbkV4cGFuZGluZyA9IHNob3VsZEV4cGFuZCA9PiB7XHJcblx0aWYgKHNob3VsZEV4cGFuZCkge1xyXG5cdFx0cHJpbWFyeU5hdi5zZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwYW5kZWQnLCB0cnVlKTtcclxuXHRcdHByaW1hcnlOYXYuY2xhc3NMaXN0LmFkZCgnc2xpZGUtaW4nKTtcclxuXHRcdHByaW1hcnlOYXYuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4gcHJpbWFyeU5hdi5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1pbicpLCB7IG9uY2U6IHRydWUgfSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHByaW1hcnlOYXYuY2xhc3NMaXN0LmFkZCgnc2xpZGUtb3V0Jyk7XHJcblx0XHRwcmltYXJ5TmF2LmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdCdhbmltYXRpb25lbmQnLFxyXG5cdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0cHJpbWFyeU5hdi5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1vdXQnKTtcclxuXHRcdFx0XHRwcmltYXJ5TmF2LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1leHBhbmRlZCcpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR7IG9uY2U6IHRydWUgfVxyXG5cdFx0KTtcclxuXHR9XHJcbn07XHJcblxyXG4vKiBmZWF0dXJlcyB0YWJzIGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZUZlYXR1cmVzQ29udHJvbEJ1dHRvbiA9IGUgPT4ge1xyXG5cdGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0O1xyXG5cdC8qIGlmIGNsaWNrZWQgb24gY3VycmVudCBleHBhbmRlZCB0YWIsIHJldHVybiAqL1xyXG5cdGlmIChidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJykgPT09ICd0cnVlJykgcmV0dXJuO1xyXG5cclxuXHQvKiBoaWRlIGFsbCB0YWJzIGFuZCBjb2xsYXBzZSBhbGwgYnV0dG9ucyAqL1xyXG5cdGNvbGxhcHNlQWxsRmVhdHVyZXNCdG5zKCk7XHJcblx0aGlkZUFsbEZlYXR1cmVzVGFicygpO1xyXG5cdC8qIHVwZGF0ZSBidXR0b25zIGFuZCBjdXJyZW50IGJ1dHRvbiAqL1xyXG5cdHVwZGF0ZVVuZGVybGluZU9yaWdpbihwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleCkpO1xyXG5cdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcclxuXHQvKiBnZXQgdGFiIHRhcmdldGVkIGJ5IHRoZSBidXR0b24gYW5kIHVwZGF0ZSBpdCAqL1xyXG5cdGNvbnN0IHRhcmdldFRhYklkID0gJyMnICsgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpO1xyXG5cdGNvbnN0IHRhcmdldFRhYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFRhYklkKTtcclxuXHR0YXJnZXRUYWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdHRhcmdldFRhYkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hvd2luZycpO1xyXG5cdHRhcmdldFRhYkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4gdGFyZ2V0VGFiRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93aW5nJyksIHsgb25jZTogdHJ1ZSB9KTtcclxufTtcclxuXHJcbmNvbnN0IGNvbGxhcHNlQWxsRmVhdHVyZXNCdG5zID0gKCkgPT4ge1xyXG5cdGZvciAoY29uc3QgY3RybEJ0biBvZiBmZWF0dXJlc0NvbnRyb2xCdG5zKSB7XHJcblx0XHRjdHJsQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCB1cGRhdGVVbmRlcmxpbmVPcmlnaW4gPSBwaXZvdElkeCA9PiB7XHJcblx0ZmVhdHVyZXNDb250cm9sQnRucy5mb3JFYWNoKChjdHJsQnRuLCBpZHgpID0+IHtcclxuXHRcdC8qIGlmIHRoZSBjdXJyZW50IG92ZXJsb29rZWQgaW5kZXgsIGNoYW5nZSBkaXJlY3Rpb24gZGVwZW5kaW5nIG9uIHByZXZpb3VzIGRpcmVjdGlvbiAqL1xyXG5cdFx0aWYgKGlkeCA9PT0gcGl2b3RJZHgpXHJcblx0XHRcdGN0cmxCdG4uZGF0YXNldC51bmRlbGluZU9yaWdpbiA9PT0gJ2xlZnQnXHJcblx0XHRcdFx0PyAoY3RybEJ0bi5kYXRhc2V0LnVuZGVsaW5lT3JpZ2luID0gJ3JpZ2h0JylcclxuXHRcdFx0XHQ6IChjdHJsQnRuLmRhdGFzZXQudW5kZWxpbmVPcmlnaW4gPSAnbGVmdCcpO1xyXG5cdFx0LyogZWxzZSBjaGFuZ2UgZGVwZW5kaW5nIG9uIHRoZSBwb3NpdGlvbmluZyB0byB0aGUgY3VycmVudCBpbmRleCAqL1xyXG5cdFx0aWYgKGlkeCA8IHBpdm90SWR4KSBjdHJsQnRuLnNldEF0dHJpYnV0ZSgnZGF0YS11bmRlcmxpbmUtb3JpZ2luJywgJ3JpZ2h0Jyk7XHJcblx0XHRpZiAoaWR4ID4gcGl2b3RJZHgpIGN0cmxCdG4uc2V0QXR0cmlidXRlKCdkYXRhLXVuZGVybGluZS1vcmlnaW4nLCAnbGVmdCcpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgaGlkZUFsbEZlYXR1cmVzVGFicyA9ICgpID0+IHtcclxuXHRmZWF0dXJlVGFicy5mb3JFYWNoKHRhYiA9PiB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG59O1xyXG5cclxuLyogaW5pdGlhbGl6YXRpb24gZm9yIHRhYnMgKi9cclxuY29uc3QgaW5pdEZlYXR1cmVzQ29udHJvbEJ0bnMgPSAoKSA9PiB7XHJcblx0ZmVhdHVyZXNDb250cm9sQnRucy5mb3JFYWNoKChjdHJsQnRuLCBpZHgpID0+IGN0cmxCdG4uc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaWR4KSk7XHJcbn07XHJcblxyXG4vKiBhY2NvcmRpb24gaGFuZGxpbmcgKi9cclxuY29uc3QgaGFuZGxlS2V5UHJlc3MgPSBlID0+IHtcclxuXHRjb25zdCBrZXlDb2RlID0gZS5rZXlDb2RlO1xyXG5cdGNvbnN0IGlkeCA9IEFycmF5LmZyb20oYWNjb3JkaW9uQnRucykuZmluZEluZGV4KGJ0biA9PiBidG4gPT09IGUudGFyZ2V0KTtcclxuXHRzd2l0Y2ggKGtleUNvZGUpIHtcclxuXHRcdGNhc2UgS0VZX0NPREVTLmFycm93VXA6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bW92ZUZvY3VzVXAoaWR4KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIEtFWV9DT0RFUy5hcnJvd0Rvd246XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bW92ZUZvY3VzRG93bihpZHgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdGNhc2UgS0VZX0NPREVTLmhvbWU6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bW92ZUZvY3VzVG9GaXJzdEVsZW1lbnQoKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlIEtFWV9DT0RFUy5lbmQ6XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bW92ZUZvY3VzVG9MYXN0RWxlbWVudCgpO1xyXG5cdFx0XHRicmVhaztcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBtb3ZlRm9jdXNVcCA9IGlkeCA9PiB7XHJcblx0Y29uc3QgcHJldklkeCA9IChhY2NvcmRpb25CdG5zLmxlbmd0aCArIGlkeCAtIDEpICUgYWNjb3JkaW9uQnRucy5sZW5ndGg7XHJcblx0YWNjb3JkaW9uQnRuc1twcmV2SWR4XS5mb2N1cygpO1xyXG5cdHJldHVybiBwcmV2SWR4O1xyXG59O1xyXG5cclxuY29uc3QgbW92ZUZvY3VzRG93biA9IGlkeCA9PiB7XHJcblx0Y29uc3QgbmV4dElkeCA9IChpZHggKyAxKSAlIGFjY29yZGlvbkJ0bnMubGVuZ3RoO1xyXG5cdGFjY29yZGlvbkJ0bnNbbmV4dElkeF0uZm9jdXMoKTtcclxuXHRyZXR1cm4gbmV4dElkeDtcclxufTtcclxuXHJcbmNvbnN0IG1vdmVGb2N1c1RvRmlyc3RFbGVtZW50ID0gXyA9PiB7XHJcblx0YWNjb3JkaW9uQnRuc1swXS5mb2N1cygpO1xyXG5cdHJldHVybiAwO1xyXG59O1xyXG5cclxuY29uc3QgbW92ZUZvY3VzVG9MYXN0RWxlbWVudCA9IF8gPT4ge1xyXG5cdGFjY29yZGlvbkJ0bnNbYWNjb3JkaW9uQnRucy5sZW5ndGggLSAxXS5mb2N1cygpO1xyXG5cdHJldHVybiBhY2NvcmRpb25CdG5zLmxlbmd0aCAtIDE7XHJcbn07XHJcblxyXG4vKiBmb3JtIGhhbmRsaW5nICovXHJcbmNvbnN0IGhhbmRsZU9wdEluU3VibWl0ID0gZSA9PiB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdGNvbnN0IHZhbHVlID0gb3B0SW5Gb3JtSW5wdXQudmFsdWU7XHJcblxyXG5cdGlmIChpc0JsYW5rKHZhbHVlKSkgc2hvd01lc3NhZ2UoJ2Vycm9yJywgJ1RoaXMgZmllbGQgY2Fubm90IGJlIGVtcHR5Jyk7XHJcblx0ZWxzZSBpZiAoIWlzVmFsaWRFbWFpbCh2YWx1ZSkpIHNob3dNZXNzYWdlKCdlcnJvcicsIFwiV2hvb3BzLCBtYWtlIHN1cmUgaXQncyBhbiBlbWFpbFwiKTtcclxuXHRlbHNlIHNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1N1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLiBDaGVjayB5b3VyIGVtYWlsIGJveC4nKTtcclxufTtcclxuXHJcbmNvbnN0IHNob3dNZXNzYWdlID0gKHN0YXR1cywgbWVzc2FnZSkgPT4ge1xyXG5cdG9wdEluRm9ybUlucHV0Qm94LnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0dXMnLCBzdGF0dXMpO1xyXG5cdG9wdEluRm9ybU1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxufTtcclxuXHJcbmNvbnN0IGlzVmFsaWRFbWFpbCA9IGVtYWlsID0+IEVNQUlMX1JFR0VYLnRlc3QoZW1haWwpO1xyXG5cclxuY29uc3QgaXNCbGFuayA9IHZhbHVlID0+IHZhbHVlID09PSAnJztcclxuXHJcbi8qIGV2ZW50IGxpc3RlbmVycyAqL1xyXG5uYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVOYXZUb2dnbGUpO1xyXG5mZWF0dXJlc0NvbnRyb2xCdG5zLmZvckVhY2goY3RybEJ0biA9PiBjdHJsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlRmVhdHVyZXNDb250cm9sQnV0dG9uKSk7XHJcbmFjY29yZGlvbkJ0bnMuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcykpO1xyXG5vcHRJbkZvcm1TdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVPcHRJblN1Ym1pdCk7XHJcblxyXG5pbml0RmVhdHVyZXNDb250cm9sQnRucygpO1xyXG4iXX0=
